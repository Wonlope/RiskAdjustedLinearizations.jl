<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Risk-Adjusted Linearizations · RiskAdjustedLinearizations.jl</title><link rel="canonical" href="https://invenia.github.io/PkgTemplates.jl/risk_adjusted_linearization/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">RiskAdjustedLinearizations.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Risk-Adjusted Linearizations</a><ul class="internal"><li><a class="tocitem" href="#Theory-1"><span>Theory</span></a></li><li><a class="tocitem" href="#Helper-Types-1"><span>Helper Types</span></a></li></ul></li><li><a class="tocitem" href="../numerical_algorithms/">Numerical Algorithms</a></li><li><a class="tocitem" href="../example/">Example</a></li><li><a class="tocitem" href="../tips/">Tips</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Risk-Adjusted Linearizations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Risk-Adjusted Linearizations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/chenwilliam77/RiskAdjustedLinearizations.jl/blob/master/docs/src/risk_adjusted_linearization.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="risk-adjusted-linearization-1"><a class="docs-heading-anchor" href="#risk-adjusted-linearization-1">Risk-Adjusted Linearizations</a><a class="docs-heading-anchor-permalink" href="#risk-adjusted-linearization-1" title="Permalink"></a></h1><h2 id="Theory-1"><a class="docs-heading-anchor" href="#Theory-1">Theory</a><a class="docs-heading-anchor-permalink" href="#Theory-1" title="Permalink"></a></h2><h3 id="Nonlinear-Model-1"><a class="docs-heading-anchor" href="#Nonlinear-Model-1">Nonlinear Model</a><a class="docs-heading-anchor-permalink" href="#Nonlinear-Model-1" title="Permalink"></a></h3><p>Most dynamic economic models can be formulated as the system of nonlinear equations</p><div>\[\begin{aligned}
    z_{t + 1} &amp; = \mu(z_t, y_t) + \Lambda(z_t)(y_{t + 1} - \mathbb{E}_t y_{t + 1}) + \Sigma(z_t) \varepsilon_{t + 1},\\
    0 &amp; = \log\mathbb{E}_t[\exp(\xi(z_t, y_t) + \Gamma_5 z_{t + 1} + \Gamma_6 y_{t + 1})].
\end{aligned}\]</div><p>The vectors <span>$z_t\in \mathbb{R}^{n_z}$</span> and <span>$y_t \in \mathbb{R}^{n_y}$</span> are the state and jump variables, respectively. The first vector equation comprise the model&#39;s expectational equations, which are typically the first-order conditions for the jump variables from agents&#39; optimization problem. The second vector equation comprise the transition equations of the state variables. The exogenous shocks <span>$\varepsilon\in\mathbb{R}^{n_\varepsilon}$</span> form a martingale difference sequence whose distribution is described by the differentiable, conditional cumulant generating function (ccgf)</p><div>\[\begin{aligned}
\kappa[\alpha(z_t) \mid z_t] = \log\mathbb{E}_t[\exp(\alpha(z_t)&#39; \varepsilon_{t + 1})],\quad \text{ for any differentiable map }\alpha::\mathbb{R}^{n_z}\rightarrow\mathbb{R}^{n_\varepsilon}.
\end{aligned}\]</div><p>The functions</p><div>\[\begin{aligned}
\xi:\mathbb{R}^{2n_y + 2n_z}\rightarrow \mathbb{R}^{n_y},&amp; \quad \mu:\mathbb{R}^{n_y + n_z}\rightarrow \mathbb{R}^{n_z},\\
\Lambda::\mathbb{R}^{n_z} \rightarrow \mathbb{R}^{n_z \times n_y}, &amp; \quad \Sigma::\mathbb{R}^{n_z}\ \rightarrow \mathbb{R}^{n_z\times n_\varepsilon}
\end{aligned}
are differentiable. The first two functions characterize the effects of time ``t`` variables on the expectational and
state transition equations. The function ``\Lambda`` characterizes heteroskedastic endogenous risk that depends on
innovations in jump variables while the function ``\Sigma`` characterizes exogenous risk.

### Risk-Adjusted Linearizations by Affine Approximation

Many economic models are typically solved by perturbation around the deterministic steady state. To break certainty equivalence so that
asset pricing is meaningful, these perturbations need to be at least third order. However, even third-order perturbations
can poorly approximate the true global solution. A key problem is that the economy may not spend much time near the
deterministic steady state, so a perturbation around this point will be inaccurate.


Instead of perturbing the model&#39;s nonlinear equations around the deterministic steady state, we could perturb around the
stochastic or &quot;risky&quot; steady state. This point is better for a perturbation because the economy will spend a
large amount of time near the stochastic steady state. [Lopez et al. (2018)](https://ideas.repec.org/p/bfr/banfra/702.html)
show that an affine approximation of the model&#39;s nonlinear equation is equivalent to a linearization around the
stochastic steady state. Further, they confirm that in practice this &quot;risk-adjusted&quot; linearization well approximate
global solutions of canonical economic models and outperforms perturbations around the deterministic steady state.

The affine approximation of an dynamic economic model is\]</div><p>math \begin{aligned}     \mathbb{E}[z<em>{t + 1}] &amp; = \mu(z, y) + \Gamma</em>1(z<em>t - z) + \Gamma</em>2(y<em>t - y)\
    0                      &amp; = \xi(z, y) + \Gamma</em>3(z<em>t - z) + \Gamma</em>4(y<em>t - y) + \Gamma</em>5 \mathbb{E}<em>t z</em>{t + 1} + \Gamma<em>6 \mathbb{E}</em>t y<em>{t + 1} + \mathscr{V}(z) + J\mathscr{V}(z)(z</em>t  - z), \end{aligned}</p><pre><code class="language-none">
where ``\Gamma_1, \Gamma_2`` are the Jacobians of ``\mu`` with respect to ``z_t`` and ``y_t``, respectively;
``\Gamma_3, \Gamma_4`` are the Jacobians of ``\xi`` with respect to ``z_t`` and ``y_t``, respectively;
``\Gamma_5, \Gamma_6`` are constant matrices; ``\mathscr{V}(z)`` is the model&#39;s entropy;
``J\mathscr{V}(z)`` is the Jacobian of the entropy;
``J\mathscr{V}(z)`` is the Jacobian of the entropy;

and the state variables ``z_t`` and jump variables ``y_t`` follow</code></pre><p>math \begin{aligned}     z<em>{t + 1} &amp; = z + \Gamma</em>1(z<em>t - z) + \Gamma</em>2(y<em>t - y) + (I</em>{n<em>z} - \Lambda(z</em>t) \Psi)^{-1}\Sigma(z<em>t)\varepsilon</em>{t + 1},\
    y<em>t       &amp; = y + \Psi(z</em>t - z) \end{aligned}</p><pre><code class="language-none">
The unknowns ``(z, y, \Psi)`` solve the system of equations</code></pre><p>math \begin{aligned} 0 &amp; = \mu(z, y) - z,\
0 &amp; = \xi(z, y) + \Gamma<em>5 z + \Gamma</em>6 y + \mathscr{V}(z),\
0 &amp; = \Gamma<em>3 + \Gamma</em>4 \Psi + (\Gamma<em>5 + \Gamma</em>6 \Psi)(\Gamma<em>1 + \Gamma</em>2 \Psi) + J\mathscr{V}(z). \end{aligned}</p><pre><code class="language-none">
Refer to [Lopez et al. (2018) &quot;Risk-Adjusted Linearizations of Dynamic Equilibrium Models&quot;](https://ideas.repec.org/p/bfr/banfra/702.html) for more details about the theory justifying this approximation approach.

## Implementation: `RiskAdjustedLinearization`

We implement risk-adjusted linearizations of nonlinear dynamic economic models
through the wrapper type `RiskAdjustedLinearization`.
The user only needs to define the functions and matrices characterizing the equilibrium of the nonlinear model. Once these
functions are defined, the user can create a `RiskAdjustedLinearization` object, which will automatically
create the Jacobian functions needed to compute the affine approximation.

To ensure efficiency in speed and memory, this package takes advantage of a number of features that are easily
accessible through Julia.

1. The Jacobians are calculated using forward-mode automatic differentiation rather than symbolic differentiation.

2. The Jacobian functions are constructed to be in-place with pre-allocated caches.

3. Functions provided by the user will be converted into in-place functions with pre-allocated caches.

4. (Coming in the future) Calculation of Jacobians with automatic differentiation is accelereated by exploiting sparsity with SparseDiffTools.jl

See the [Example](@ref example) for how to use the type.
</code></pre><p>@docs RiskAdjustedLinearizations.RiskAdjustedLinearization ```</p><h2 id="Helper-Types-1"><a class="docs-heading-anchor" href="#Helper-Types-1">Helper Types</a><a class="docs-heading-anchor-permalink" href="#Helper-Types-1" title="Permalink"></a></h2><p>TBD</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../numerical_algorithms/">Numerical Algorithms »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 12 September 2020 17:37">Saturday 12 September 2020</span>. Using Julia version 1.5.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
